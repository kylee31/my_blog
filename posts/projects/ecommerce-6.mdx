---
title: í”„ë¡œì íŠ¸ì— ì ìš©í•œ Vite ì •ë¦¬ì™€ Vitest ì•Œì•„ë³´ê¸°
date: 2024-07-07
description: ë¹Œë“œ ë„êµ¬ Viteì™€ í…ŒìŠ¤íŠ¸ ë„êµ¬ Vitest
cate: ecommerce
---

> í”„ë¡œì íŠ¸ì— ì‚¬ìš©ë˜ì–´ rollup ì˜µì…˜ìœ¼ë¡œ chunkë¥¼ ë¶„ë¦¬í•œ ë¹Œë“œ ë„êµ¬ Viteì™€ ì´ì— ê¸°ë°˜í•œ í…ŒìŠ¤íŠ¸ ë„êµ¬ Vitestì— ëŒ€í•´ ì•Œì•„ë³´ì.

ë¨¼ì € Viteë€ Vue.jsì˜ ì°½ì‹œìì¸ Evan Youê°€ ì‘ì„±í•˜ê³  Vue ë° React í”„ë¡œì íŠ¸ í…œí”Œë¦¿ì— ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¡œì»¬ ê°œë°œ
ì„œë²„(ë¹Œë“œ ë„êµ¬)ì´ë‹¤. TypeScript ë° JSXë¥¼ ì§€ì›í•˜ë©° ë²ˆë“¤ë§ì„ ìœ„í•´ ë‚´ë¶€ì ìœ¼ë¡œ ì˜µì…˜ Rollupê³¼ esbuildë¥¼ ì‚¬ìš©í•œë‹¤.

- [ë¡¤ì—…ê³¼ ì›¹íŒ©ì˜ ì°¨ì´ì ](https://yoon-dumbo.tistory.com/entry/%EB%A1%A4%EC%97%85%EA%B3%BC-%EC%9B%B9%ED%8C%A9%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90-rollup-vs-webpack)

ë²ˆë“¤ëŸ¬ë€, ì—¬ëŸ¬ ê°œë¡œ ëª¨ë“ˆí™”ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ì¦‰, 'bundle' í•´ì£¼ëŠ” ë„êµ¬ì´ë‹¤. ë¸Œë¼ìš°ì €ëŠ” ëª¨ë“ˆí™”ëœ
ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì½ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ¬í•œ ê³¼ì •ì´ í•„ìš”í•˜ë‹¤. Webpackì´ ê°€ì¥ ëŒ€ì¤‘ì ì¸ ë²ˆë“¤ëŸ¬ë¡œ ì‚¬ìš©ë˜ê³  ìˆë‹¤.

â“ Viteì˜ ì¥ì 

[Viteë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ ](https://ko.vitejs.dev/guide/why)

## Vitest

Viteë¥¼ ì‚¬ìš©í•˜ê³  ìˆì–´ Vitestë¥¼ ì„¤ì¹˜í•˜ì˜€ë‹¤. ì´í›„ package.jsonê³¼ vite.config.tsì— test ê´€ë ¨ ì„¤ì • ì™„ë£Œ.

```
//package.json

"scripts": {
    //...
    "test":"vitest",
    "test:run": "vitest run"
},
```

```
//vite.config.ts
/// <reference types="vitest" />
export default defineConfig({
  test: {
    include: ["src/__tests__/*/*.test.ts?(x)"],
    globals: true,
    //environment: "jsdom",
  },
});

```

1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (unit test) : ì „ì²´ ì½”ë“œ ì¤‘ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©° ê°€ì¥ ì‘ì€ ë¶€ë¶„ í…ŒìŠ¤íŠ¸
2. í†µí•© í…ŒìŠ¤íŠ¸ (intergration test) : ê°ê°ì˜ ì‹œìŠ¤í…œë“¤ì´ ì„œë¡œ ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©í•˜ê³  ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸
   â–¶ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì™€ëŠ” ë‹¤ë¥´ê²Œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ì˜ ìƒí˜¸ì‘ìš© ë“±ì„ í…ŒìŠ¤íŠ¸
3. E2E í…ŒìŠ¤íŠ¸ (ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸(Funcional Test)) : ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ ì™„ì „í•œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ë°”ë¡œ ì‘ì„±í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì•˜ë‹¤. util í•¨ìˆ˜ì— ëŒ€í•œ íŒŒì¼ì„ ìƒì„±í•˜ì˜€ë‹¤. (expect~toBe)
ì´ì¤‘ ë¦¬íŒ©í† ë§ í•˜ê²Œ ëœ
ìœ í‹¸ í•¨ìˆ˜ ì½”ë“œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì.

### (util í•¨ìˆ˜) ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

ì›ë˜ ì•„ë˜ì˜ ì½”ë“œëŠ” document.titleì„ ì§ì ‘ ë³€ê²½í•˜ëŠ” ë¡œì§ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆì—ˆë‹¤. ê·¸ëŸ¬ë‚˜ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ìˆœìˆ˜ í•¨ìˆ˜
ê¸°ì¤€ì— ì–´ê¸‹í•˜ëŠ” ë¶€ë¶„ì´ ì¡´ì¬í•¨ì„ ë°œê²¬í–ˆë‹¤.

**ìˆœìˆ˜í•¨ìˆ˜**

1. ë™ì¼í•œ ì…ë ¥ì— ëŒ€í•´ í•­ìƒ ë™ì¼í•œ ì¶œë ¥ì„ ë°˜í™˜í•´ì•¼ í•œë‹¤.
2. ì™¸ë¶€ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤ (ë¶€ìˆ˜ íš¨ê³¼(side effect)ê°€ ì—†ì–´ì•¼ í•œë‹¤).

document ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” side effectê°€ ë‘ë²ˆì§¸ ì¡°ê±´ì— ì–´ê¸‹ë‚˜ëŠ” ê²ƒì´ì—ˆë‹¤. ë”°ë¼ì„œ ì•„ë˜ì˜ ë¡œì§ìœ¼ë¡œ ì½”ë“œë¥¼ ë³€ê²½í–ˆë‹¤.

```
// src/util/changePathname.ts
import { ProductCategory } from "@/services/data/ProductData";

const changePathname = (pathname: string) => {
  const path = pathname.split("/");
  const idx = path.length - 1;
  const decodingPathName = decodeURI(path[idx]);
  let locName = decodingPathName == "" ? "home" : decodingPathName;

  if (path[2] === "edit-product") {
    locName = "edit-product";
  }
  if (path[2] === "update-product") {
    locName = "update-product";
  }
  if (ProductCategory.includes(decodeURI(path[2]))) {
    locName = decodeURI(path[2]);
  }
  return `${locName} | Logo`;
};

export default changePathname;
```

```
//util.test.ts
test("change path name", () => {
  expect(
    changePathname("https://e-commerce-f517b.web.app/category/í™ˆë¦¬ë¹™")
  ).toBe("í™ˆë¦¬ë¹™ | Logo");
});
```

npm run testëŠ” ë³€ê²½ì‚¬í•­ì„ ê´€ì°°í•˜ì—¬ test ê²°ê³¼ë¥¼ ë°”ë¡œ ë°˜í™˜í•´ì¤€ë‹¤. (npm run test:runì€ í•œë²ˆë§Œ ì‹¤í–‰, CIì— íš¨ìœ¨ì )

## ğŸ“Œì°¸ê³ 

- [Vitest.dev ê³µì‹ë¬¸ì„œ](https://vitest.dev/)
- [Vitest ì²˜ìŒ ì‹œì‘í•˜ê¸°](https://www.daleseo.com/vitest/)
- [Example of Unit Test, Integration Test, E2E Test and in Frontend Testing](https://medium.com/@leovoon/example-of-unit-test-integration-test-e2e-test-and-in-frontend-testing-673c901b3ff9)
