---
title: Javascript, Promiseì™€ async/await
date: 2024-05-31
description: ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹, Promiseì™€ async/await ì •ë¦¬
---

> ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ê¸°ì  ì–¸ì–´ì´ì§€ë§Œ, ì´ë²¤íŠ¸ ë£¨í”„ë¼ëŠ” ë™ì‘ ë°©ì‹ì„ í™œìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.
> ì´ëŸ¬í•œ ë¹„ë™ê¸° ì²˜ë¦¬ì— ì‚¬ìš©ë˜ëŠ” ë°©ì‹ì¸ ì½œë°± í•¨ìˆ˜ì™€ Promise, ê·¸ë¦¬ê³  async/awaitì— ëŒ€í•´ í™•ì‹¤í•˜ê²Œ ì •ë¦¬í•´ë³´ì.

- ë™ê¸°ì  í”„ë¡œê·¸ë˜ë°

  1. ìˆœì°¨ì  í”„ë¡œê·¸ë˜ë°
  2. ì„œë¸Œë£¨í‹´ê°„ ëª…í™•í•œ ì‹¤í–‰ ìˆœì„œê°€ ì¡´ì¬í•˜ëŠ” ë°©ì‹

- ë¹„ë™ê¸°ì  í”„ë¡œê·¸ë˜ë°

  1. ì„œë¸Œë£¨í‹´ê°„ ëª…í™•í•œ ì‹¤í–‰ ìˆœì„œê°€ ì—†ë‹¤
  2. ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤

â–¶ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ë©´ ë‹¹ì¥ ì²˜ë¦¬ë˜ì§€ ì•ŠëŠ” ì¼ì„ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë‹¤ìŒ ì¼ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì´ë‹¤.

âœ… **ë¹„ë™ê¸°ì  ìˆ˜í–‰**

- ë„¤íŠ¸ì›Œí¬ ìš”ì²­
- íƒ€ì´ë¨¸
- ì…/ì¶œë ¥ ì‹œìŠ¤í…œ

ì•ì„œ ë§í–ˆë“¯ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œì´ê¸° ë•Œë¬¸ì— ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ì–´ë–»ê²Œ ë©€í‹° ìŠ¤ë ˆë“œì²˜ëŸ¼
ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ”ê±¸ê¹Œ?

## ì´ë²¤íŠ¸ ë£¨í”„

ì½œ ìŠ¤íƒ(Call Stack)ê³¼ íƒœìŠ¤í¬ í(Task Queue)ë¥¼ ê´€ë¦¬í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì½œë°±ì„ ì‹¤í–‰í•˜ëŠ” ë™ì‘ ê³¼ì •(ì‹œìŠ¤í…œ).
ì´ëŸ¬í•œ ì‹œìŠ¤í…œ ë•ë¶„ì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

- Web API : ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ API

![](/learned/js-promise-1.jpg)

ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ í™œìš©í•˜ì—¬ ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ì œëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì–´ë–»ê²Œ í•˜ëŠ”ì§€, ì½œë°± í•¨ìˆ˜ë¶€í„°
Promise ê°ì²´, async/awaitê¹Œì§€ ë¹„ë™ê¸° ë§¤ì»¤ë‹ˆì¦˜ì„ ì•Œì•„ë³´ì!

1. ì½œë°± í•¨ìˆ˜ : ë‹¤ë¥¸ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜

- ì½œë°± í•¨ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ, ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í•œ ë²ˆì— í•˜ê¸° ì–´ë µê³ , ì½œë°± ì§€ì˜¥ì´ ìƒê¸´ë‹¤.
- ì½œë°± ì§€ì˜¥
  : ê°€ë…ì„± ì €í•˜, ì—ëŸ¬ ì²˜ë¦¬ ì–´ë ¤ì›€, ì½”ë“œê°€ ë³µì¡í•´ì ¸ ë²„ê·¸ ë°œìƒ ê°€ëŠ¥ì„± í–¥ìƒ

  ```js
  getData(function (a) {
    getMoreData(a, function (b) {
      getMoreData(b, function (c) {
        getMoreData(c, function (d) {
          getMoreData(d, function (e) {
            // ì‘ì—… ìˆ˜í–‰
          });
        });
      });
    });
  });
  ```

2. Promise : ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœì™€ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°ì²´

- ì½œë°± í•¨ìˆ˜ì˜ ë‹¨ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ë“±ì¥í•œ ë¹„ë™ê¸° ì²˜ë¦¬ ê°ì²´(ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œì ì„ ëª…í™•í•˜ê²Œ í‘œí˜„í•  ìˆ˜ ìˆìŒ)

**[Promise ìƒì„±]**

- Promise ìƒì„±ì í•¨ìˆ˜ë¥¼ new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œë˜ì–´ ìƒì„±
- ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì½œë°± í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì§„í–‰ (ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬ë°›ì•„ resolve, reject í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬)
- ë¹„ë™ê¸° ì²˜ë¦¬ ì„±ê³µ ì‹œ resolve í˜¸ì¶œ, ë¹„ë™ê¸° ì²˜ë¦¬ ì‹¤íŒ¨ ì‹œ reject í˜¸ì¶œ

  ```js
  const promise = new Promise((resolve, reject) => {
    if(/*ë¹„ë™ê¸° ì²˜ë¦¬ ì„±ê³µ*/){
        resolve("result");
    }
    else{//ë¹„ë™ê¸° ì²˜ë¦¬ ì‹¤íŒ¨
        reject("failed");
    }
  });
  ```

**[Promise ìƒíƒœ]**

- Promiseê°€ ê°–ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœëŠ” 3ê°€ì§€ (pending, fulfilled, rejected - fulfilled/rejectedëŠ” setteld ìƒíƒœ)

  - pending : ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰ì¤‘ì¸ ìƒíƒœ
  - fulfilled : ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì„±ê³µí•œ ìƒíƒœ
  - rejected : ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì‹¤íŒ¨í•œ ìƒíƒœ

- ë¹„ë™ê¸° ì²˜ë¦¬ ìƒíƒœì™€ ë”ë¶ˆì–´ ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë„ ê°€ì§„ë‹¤.

  ![](/learned/js-promise-2.jpg)

**[Promise í›„ì† ì²˜ë¦¬ ë©”ì†Œë“œ]**

âœ” ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œ: íŠ¹ì • ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ. ê°ì²´ ìƒì„± í›„ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë©”ì†Œë“œë¥¼ í˜¸ì¶œ ê°€ëŠ¥

- í”„ë¡œë¯¸ìŠ¤ì˜ ìƒíƒœê°€ ë³€í™”í•˜ë©´ í›„ì† ì²˜ë¦¬ ë©”ì†Œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬í•œ ì½œë°± í•¨ìˆ˜ê°€ ì„ íƒì ìœ¼ë¡œ í˜¸ì¶œëœë‹¤.
- ëª¨ë“  í›„ì† ì²˜ë¦¬ ë©”ì†Œë“œëŠ” í”„ë¡œë¯¸ìŠ¤ë¥¼ ë°˜í™˜í•˜ë©° ë¹„ë™ê¸°ë¡œ ë™ì‘í•œë‹¤.

* Promise.prototype.then
  : ë‘ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬. ì²«ë²ˆì§¸ ì¸ìëŠ” fulfilled ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œ(ë¹„ë™ê¸° ì²˜ë¦¬ ê²°ê³¼ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŒ),
  ë‘ë²ˆì§¸ ì¸ìëŠ” rejected ìƒíƒœê°€ ë˜ë©´ í˜¸ì¶œ(ì—ëŸ¬ë¥¼ ì¸ìˆ˜ë¡œ ë°›ìŒ)

  ```js
  new Promise(resolve=>resolve("fulfilled))
    .then(v=>console.log(v),e=>console.log("error",e))

  new Promise((_,reject)=>reject(new Error("rejected")))
    .then(v=>console.log(v),e=>console.log("error",e))
  ```

* Promise.prototyep.catch
  : í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬. ì—ëŸ¬ ë°œìƒ ì‹œ ì¸ìˆ˜ë¡œ ì—ëŸ¬ë¥¼ ë°›ìŒ

  ```js
  new Promise((_, reject) => reject(new Error("rejected"))).catch((e) =>
    console.log("error", e)
  );
  ```

â• thenì€ ë³´í†µ ì²«ë²ˆì§¸ ìš”ì†Œ(fulfilled ìƒíƒœ)ë§Œ ì‚¬ìš©í•˜ê³  ì—ëŸ¬ëŠ” catchë¡œ ì‚¬ìš©!

- Promise.prototype.finally
  : í•œ ê°œì˜ ì½œë°± í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬

  - ì„±ê³µ, ì‹¤íŒ¨ì™€ ìƒê´€ì—†ì´ ë¬´ì¡°ê±´ í˜¸ì¶œ (ê³µí†µì ìœ¼ë¡œ ìˆ˜í–‰í•  ë‚´ìš©ì´ ìˆëŠ” ê²½ìš° ìœ ìš©)

  ![](/learned/js-promise-3.jpg)

* Promise chaining í˜„ìƒ : í›„ì† ì²˜ë¦¬ ë©”ì†Œë“œëŠ” ì–¸ì œë‚˜ Promiseë¥¼ ë°˜í™˜í•˜ë¯€ë¡œ ì—°ì†ì ìœ¼ë¡œ í˜¸ì¶œ ê°€ëŠ¥í•œë°, ì´ë ‡ê²Œ ì—°ì†ì ìœ¼ë¡œ
  í˜¸ì¶œí•˜ê²Œ ë˜ë©´ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ í˜„ìƒì´ ë°œìƒí•˜ê²Œ ëœë‹¤. í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ë„ ì½œë°± íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ê¸´ í•˜ë‹¤.

âœ… async/await

- ì´ëŸ¬í•œ í”„ë¡œë¯¸ìŠ¤ ì²´ì´ë‹ í˜„ìƒì„ ë³´ì™„í•˜ê¸° ìœ„í•´ ES8ì— ë„ì…ëœ í‚¤ì›Œë“œ
- í›„ì† ì²˜ë¦¬ ë©”ì†Œë“œì—†ì´ ë™ê¸° ì²˜ë¦¬í•˜ë“¯ êµ¬í˜„ ê°€ëŠ¥(ë¹„ë™ê¸°ì  ë™ì‘ì„ ë™ê¸°ì ìœ¼ë¡œ ë³´ì´ë„ë¡ ì‘ì„±í•  ìˆ˜ ìˆëŠ” í‚¤ì›Œë“œ)
- í•¨ìˆ˜ì— async í‚¤ì›Œë“œë¥¼ ë¶™ì´ë©´ promiseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ê°€ ëœë‹¤. ì´ëŸ¬í•œ async í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ awaitì„ ì‚¬ìš©í•˜ë©´
  í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•œ ë™ì‘ì´ ì™„ë£Œë ë•Œê¹Œì§€ í•¨ìˆ˜ë¥¼ ì¤‘ë‹¨í•˜ê³  ê¸°ë‹¤ë¦¬ë¯€ë¡œ ë™ê¸°ì ìœ¼ë¡œ ë³´ì—¬ì§„ë‹¤.

**[Promise ì •ì  ë©”ì†Œë“œ]**

âœ” ì •ì  ë©”ì†Œë“œ : í´ë˜ìŠ¤ ìì²´ì—ì„œ í˜¸ì¶œë˜ëŠ” ë©”ì†Œë“œ. ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ì•Šê³ ë„ í´ë˜ìŠ¤ ì´ë¦„ì„ í†µí•´ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥

- Promise.resolve, Promise.reject
  : ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê°’ì„ ë§¤í•‘í•˜ì—¬ í”„ë¡œë¯¸ìŠ¤ ìƒì„±

  ```js
  //ë‘˜ì˜ ê²°ê³¼ëŠ” ë™ì¼!
  const resolvePromise = new Promise((resolve) => resolve([1, 2, 3]));
  resolvePromise.then(console.log);

  const resolvePromise2 = Promise.resolve([1, 2, 3]);
  resolvePromise2.then(console.log);
  ```

- Promise.all
  : ì—¬ëŸ¬ ê°œì˜ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ëª¨ë‘ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš© (ex. ê° ë¹„ë™ê¸° ì²˜ë¦¬ì˜ ì˜ì¡´ì„±ì´ ì—†ì„ ë•Œ ë³‘ë ¬ ì²˜ë¦¬í•˜ë©´ ìœ ìš©)

  - ì•„ë˜ì˜ ì½”ë“œëŠ” ì„œë¡œ ê°„ ì˜ì¡´ì„±ì´ ì—†ê¸° ë•Œë¬¸ì— all ë©”ì†Œë“œë¡œ ë³‘ë ¬ ì²˜ë¦¬ ê°€ëŠ¥
    ![](/learned/js-promise-4.jpg)

  - ê°ê°ì˜ í•¨ìˆ˜ê°€ Web APIë¡œ í•œë²ˆì— ìš”ì²­ì´ ê°€ê²Œ ë˜ê³  ë³‘ë ¬ ì²˜ë¦¬ê°€ ëœë‹¤
    ![](/learned/js-promise-5.jpg)

- Promise.race
  : Promise.allê³¼ ë¹„ìŠ·, ê°€ì¥ ë¨¼ì € fulfilledëœ í”„ë¡œë¯¸ìŠ¤ì˜ ì²˜ë¦¬ ê²°ê³¼ë¥¼ resolve

  âœ” ê³¼ì œ ë©´ì ‘ì—ì„œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ ëª‡ì´ˆ ì´ìƒ ê±¸ë¦¬ê³ , ê·¸ ì´í›„ì— ë­˜ í•´ì£¼ì„¸ìš”~ ë¼ê³  ìš”êµ¬í•  ë•Œ ë§ì´ ì‚¬ìš©ëœë‹¤

  - ì•„ë˜ ì½”ë“œì—ì„œëŠ” ê°€ì¥ ì‹œê°„ì´ ì§§ê²Œ ê±¸ë¦¬ëŠ”(fulfilledëœ) 3ì´ ë¨¼ì € resolveëœë‹¤
    ![](/learned/js-promise-6.jpg)

- Promise.allSettled
  : ì „ë‹¬ë°›ì€ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ê°€ settled ìƒíƒœê°€ ë˜ë©´ ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë°°ì—´ë¡œ ë°˜í™˜

  âœ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë‹¨ê±´ìœ¼ë¡œ ì°”ëŸ¬ì•¼ í•  ë•Œ, ì˜ˆë¥¼ ë“¤ì–´ ì²´í¬ë¦¬ìŠ¤íŠ¸ í•­ëª©ì„ ì—¬ëŸ¬ ê°œ ì²´í¬ í›„ ì²˜ë¦¬ ê²°ê³¼(ì„±ê³µ,ì‹¤íŒ¨)ë¥¼
  ë³´ì—¬ì£¼ì–´ì•¼ í• ë•Œ ë§ì´ ì‚¬ìš©ëœë‹¤

  ![](/learned/js-promise-7.jpg)

<hr />

## ğŸ“Œ ì°¸ê³ 

- [â­[Javascript] ë¹„ë™ê¸°, Promise, async, await í™•ì‹¤í•˜ê²Œ ì´í•´í•˜ê¸°](https://springfall.cc/article/2022-11/easy-promise-async-await)
- [[JavaScript] then vs Async/Await](https://bum-developer.tistory.com/entry/JavaScript-then-vs-AsyncAwait)
- [async/awaitì€ ì™œ ì“°ëŠ”ê°€?](https://oagree0123.tistory.com/entry/asyncawait%EC%9D%80-%EC%99%9C-%EC%93%B0%EB%8A%94%EA%B0%80)
- [promiseì™€ async awaitì˜ ì°¨ì´ì ](https://mong-blog.tistory.com/entry/promise%EC%99%80-async-await%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90#google_vignette)
